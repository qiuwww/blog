!function(t){"use strict";if(t.zWorkerInitialized)throw new Error("z-worker.js should be run only once");t.zWorkerInitialized=!0,addEventListener("message",function(t){var r=t.data,c=r.type,n=r.sn,s=e[c];if(s)try{s(r)}catch(t){!function(t,e,r){var c={type:t,sn:e,error:function(t){return{message:t.message,stack:t.stack}}(r)};postMessage(c)}(c,n,t)}});var e={importScripts:function(t){t.scripts&&t.scripts.length>0&&importScripts.apply(void 0,t.scripts);postMessage({type:"importScripts"})},newTask:c,append:s,flush:s},r={};function c(e){var c=t[e.codecClass],n=e.sn;if(r[n])throw Error("duplicated sn");r[n]={codec:new c(e.options),crcInput:"input"===e.crcType,crcOutput:"output"===e.crcType,crc:new o},postMessage({type:"newTask",sn:n})}var n=t.performance?t.performance.now.bind(t.performance):Date.now;function s(t){var e=t.sn,s=t.type,o=t.data,p=r[e];!p&&t.codecClass&&(c(t),p=r[e]);var a,i="append"===s,u=n();if(i)try{a=p.codec.append(o,function(t){postMessage({type:"progress",sn:e,loaded:t})})}catch(t){throw delete r[e],t}else delete r[e],a=p.codec.flush();var f=n()-u;u=n(),o&&p.crcInput&&p.crc.append(o),a&&p.crcOutput&&p.crc.append(a);var d=n()-u,h={type:s,sn:e,codecTime:f,crcTime:d},l=[];a&&(h.data=a,l.push(a.buffer)),i||!p.crcInput&&!p.crcOutput||(h.crc=p.crc.get());try{postMessage(h,l)}catch(t){postMessage(h)}}function o(){this.crc=-1}function p(){}o.prototype.append=function(t){for(var e=0|this.crc,r=this.table,c=0,n=0|t.length;c<n;c++)e=e>>>8^r[255&(e^t[c])];this.crc=e},o.prototype.get=function(){return~this.crc},o.prototype.table=function(){var t,e,r,c=[];for(t=0;t<256;t++){for(r=t,e=0;e<8;e++)1&r?r=r>>>1^3988292384:r>>>=1;c[t]=r}return c}(),t.NOOP=p,p.prototype.append=function(t,e){return t},p.prototype.flush=function(){}}(this);