---
title: Gitflowå·¥ä½œæµ
date: 2020-3-7
tags:
  - gitflow
categories:
  - [git, gitflow]
---

Gitflow å·¥ä½œæµå®šä¹‰äº†ä¸€ä¸ªå›´ç»•é¡¹ç›®å‘å¸ƒçš„ä¸¥æ ¼åˆ†æ”¯æ¨¡å‹ã€‚è™½ç„¶æ¯”åŠŸèƒ½åˆ†æ”¯å·¥ä½œæµå¤æ‚å‡ åˆ†ï¼Œä½†æä¾›äº†ç”¨äºä¸€ä¸ªå¥å£®çš„ç”¨äºç®¡ç†å¤§å‹é¡¹ç›®çš„æ¡†æ¶ã€‚

## å®‰è£… git-flow

`$ brew install git-flow-avh`

## åˆå§‹åŒ–

`git flow init`

é»˜è®¤çš„ä¸»è¦åˆ†æ”¯ï¼š

1. master: æ°¸è¿œå¤„åœ¨å³å°†å‘å¸ƒ(production-ready)çŠ¶æ€ï¼›
2. develop: æœ€æ–°çš„å¼€å‘çŠ¶æ€ï¼›
3. bugfix/\*: develop ä¸Šçš„ bug ä¿®å¤ï¼›
4. feature/\*: å¼€å‘æ–°åŠŸèƒ½çš„åˆ†æ”¯, **åŸºäº develop, å®Œæˆå merge å› develop**ï¼›
5. release/\*: **å‡†å¤‡è¦å‘å¸ƒç‰ˆæœ¬çš„åˆ†æ”¯, ç”¨æ¥ä¿®å¤ bug(æµ‹è¯•ç‰ˆæœ¬)**. åŸºäº develop, å®Œæˆå **merge å› develop å’Œ master**ï¼›
6. hotfix/\*: **ä¿®å¤ master ä¸Šçš„é—®é¢˜**, ç­‰ä¸åŠ release ç‰ˆæœ¬å°±å¿…é¡»é©¬ä¸Šä¸Šçº¿. åŸºäº master, **å®Œæˆå merge å› master å’Œ develop**ï¼›
7. support/\*

## git flow ä¸»è¦æ“ä½œ

æ“ä½œç±»å‹ï¼š

1. feature
2. release

æ“ä½œé˜¶æ®µï¼š

1. start
2. publish
3. finish

![git-flow-step](./imgs/git-flow-step.png)

## gitflow çš„æ­£ç¡®å§¿åŠ¿

### 1.æ–°åŠŸèƒ½å¼€å‘æµç¨‹ï¼Œfeature

ä»»ä½•åŠŸèƒ½å¼€å‘éƒ½å¿…é¡»ä» develop å¼€å§‹ã€‚

ä» develop åˆ‡é™¤ä¸€ä¸ªåˆ†æ”¯ï¼Œ**å¼€å‘å®Œæˆååˆå¹¶åˆ° developï¼Œä¸èƒ½å˜åŸº**ï¼Œå®Œæˆåä¸Šä¼ è¿œç«¯ï¼Œfinish åï¼Œè‡ªåŠ¨åˆå¹¶åˆ° developï¼Œå¹¶åˆ é™¤åˆ†æ”¯ã€‚

```bash
git checkout branch
git flow feature start ft_1_qw_date
git add && git commit
git flow feature publish ft_1_qw_date | git push origin feature/ft_1_qw_date # æäº¤åˆ°è¿œç«¯
git flow feature finish ft_1_qw_date # å®Œæˆåè‡ªåŠ¨åˆå¹¶åˆ°developï¼Œå¹¶åˆ é™¤
```

çº¿ä¸Šè®°å½•ä¼šä¿å­˜ï¼Œæœ¬åœ°åˆ†æ”¯è¢«åˆ é™¤ã€‚

#### æ–°åŠŸèƒ½å¼€å‘-æè¿°

1. ä»¥å½“å‰æœ€æ–°çš„ develop åˆ†æ”¯ï¼Œbranch ä¸€ä¸ªæ–°çš„åˆ†æ”¯ï¼›
2. å¼€å‘åŠŸèƒ½ï¼Œæµ‹è¯•ç¬¦åˆè¦æ±‚ï¼›
3. åŠŸèƒ½å¼€å‘å®Œæˆï¼Œåˆå¹¶ä»£ç åˆ° develop ä¸­ï¼Œè‡³äºæ€ä¹ˆå‘å¸ƒï¼Œéœ€è¦åˆ°å‘å¸ƒæµç¨‹å»è§£å†³ï¼›
4. è‡³æ­¤åŠŸèƒ½å¼€å‘å®Œæˆã€‚

### 2.æµ‹è¯•&å‘å¸ƒæ–°çš„åŠŸèƒ½åˆ†æ”¯

ç›´æ¥åŠŸèƒ½åˆ†æ”¯ä¸Šä¿®æ”¹ï¼ŒğŸ› Fixã€‚

```bash
git flow release start 0.1 # ä»developæ‹‰å–å‘å¸ƒåˆ†æ”¯ï¼Œè®¾ç½®ç‰ˆæœ¬å·
git flow release finish 0.1 # è¿™é‡Œä¼šè®©è¾“å…¥tagä¿¡æ¯
```

git-flow ä» develop åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ release/0.1ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ä¸‹ï¼Œ**æ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯ä¿®æ”¹ç‰ˆæœ¬å·ç­‰å‘å¸ƒæ“ä½œ**ã€‚

git-flow ä¼šä¾æ¬¡**åˆ‡æ¢åˆ° master develop ä¸‹åˆå¹¶ release/0.1 é‡Œçš„ä¿®æ”¹**ï¼Œç„¶åç”¨ git tag çš„ç»™å½“æ¬¡å‘å¸ƒæ‰“ä¸Š tag 0.1ï¼Œå¯ä»¥é€šè¿‡ git tag æŸ¥çœ‹æ‰€æœ‰ tagã€‚

#### æµ‹è¯•&å‘å¸ƒæ–°çš„åŠŸèƒ½åˆ†æ”¯-æè¿°ï¼Œrelease

1. è¦å‘å¸ƒçš„èŠ‚ç‚¹æ‹‰å‡ºæœ€æ–°çš„ developï¼›
2. **æµ‹è¯•ç¯å¢ƒæµ‹è¯•ï¼Œå‡ºç°é—®é¢˜ï¼Œå°±åœ¨å½“å‰åˆ†æ”¯ä¿®å¤**ï¼›
3. æµ‹è¯•å®Œæˆï¼Œå®Œæˆå‘å¸ƒï¼›
4. å‘å¸ƒå®Œæˆï¼Œåˆå¹¶åˆ†æ”¯åˆ° develop å’Œ masterï¼›

### 3.çº¿ä¸Š bug ä¿®æ”¹æµç¨‹ï¼Œç´§æ€¥ bug ä¿®æ­£ï¼Œä»£å· bug1ï¼Œhotfix

```bash
git flow hotfix start 'bug1'
# ä»£ç ä¿®æ”¹ï¼Œå¹¶æäº¤åˆ°å½“å‰åˆ†æ”¯
git flow hotfix finish 'bug1'
```

git-flow ä» master åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ hotfix/bug1ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ä¸‹ã€‚æ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯ä¿®å¤ bugï¼Œå®Œæˆå finishã€‚

git-flow ä¼šä¾æ¬¡**åˆ‡æ¢åˆ° master develop åˆ†æ”¯ä¸‹åˆå¹¶ hotfix/bug1**ï¼Œç„¶ååˆ æ‰ hotfix/bug1ã€‚åˆ°æ­¤ï¼Œhotfix å®Œæˆã€‚

git-flow çš„ **feature release éƒ½æ˜¯ä» develop åˆ†æ”¯åˆ›å»º**ï¼Œ**hotfix support éƒ½æ˜¯ä» master åˆ†æ”¯åˆ›å»º**ã€‚

#### çº¿ä¸Š bug ä¿®æ”¹æµç¨‹-æè¿°

1. ä» master æ‹‰å‡ºå½“å‰çº¿ä¸Šçš„åŸå§‹ä»£ç ï¼ˆå”¯ä¸€ï¼Œç›´æ¥ä» master æ‹‰å–çš„åˆ†æ”¯ï¼‰ï¼›
2. ä¿®å¤ bugï¼Œæµ‹è¯•å®Œæˆï¼›
3. å‘å¸ƒç”Ÿäº§ç¯å¢ƒä»£ç ï¼Œå®Œæˆ bug ä¿®å¤çš„åŠŸèƒ½ï¼›
4. åˆå¹¶ä¿®å¤çš„ bug ä¿¡æ¯åˆ° develop å’Œ masterï¼›

## å‚è€ƒæ–‡ç« 

[Git Flow çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿](https://www.jianshu.com/p/41910dc6ef29)
